---
const nav = [
  { href: "#leistungen",  label: "Leistungen" },
  { href: "#preise",      label: "Preise" },
  { href: "#galerie",     label: "Galerie" },
  { href: "#bewertungen", label: "Bewertungen" },
  { href: "#kontakt",     label: "Kontakt" },
  // Rechtliche Seiten
  { href: "/impressum",   label: "Impressum" },
  { href: "/datenschutz", label: "Datenschutz" },
];
---

<header class="sticky top-0 z-50 border-b border-slate-200/70 bg-white/80 backdrop-blur">
  <div class="mx-auto max-w-6xl px-4">
    <div class="flex items-center justify-between h-14">
      <!-- Brand -->
      <a href="/" class="flex items-center gap-2 min-w-0" aria-label="Startseite">
        <!-- Tipp: wenn verfügbar, /logo.svg bevorzugen -->
        <img
          src="/logo.png"
          alt="Fensterputzer A&G"
          width="160" height="48"
          class="h-8 md:h-10 w-auto select-none"
          decoding="async"
          fetchpriority="high"
          draggable="false"
        />
      </a>

      <!-- Desktop-Navigation (>= md sichtbar) -->
      <nav class="hidden md:flex items-center gap-6 text-sm text-slate-700">
        {nav.map((n) => (
          <a href={n.href} class="hover:text-slate-900">{n.label}</a>
        ))}
        <a
          href="tel:+4917629633132"
          class="inline-flex items-center rounded-lg bg-blue-600 px-4 py-2 font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2 focus:ring-offset-white"
        >
          Anrufen
        </a>
      </nav>

      <!-- Mobile: Burger-Menü (nur < md sichtbar) -->
      <details class="relative md:hidden" data-burger>
        <summary
          class="list-none cursor-pointer rounded px-3 py-2 border border-slate-300 text-sm text-slate-700 hover:bg-slate-50 inline-flex items-center gap-2"
          aria-label="Menü öffnen"
          aria-haspopup="menu"
          aria-expanded="false"
          role="button"
        >
          <!-- Burger-Icon -->
          <svg viewBox="0 0 24 24" class="h-5 w-5" aria-hidden="true" fill="currentColor">
            <path d="M3 6h18M3 12h18M3 18h18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
          <span class="sr-only">Menü</span>
        </summary>

        <!-- Dropdown -->
        <div
          class="absolute right-0 mt-2 w-56 rounded-lg border border-slate-200 bg-white p-2 shadow-lg"
          role="menu"
          aria-label="Mobile Navigation"
        >
          <nav class="flex flex-col">
            {nav.map((n) => (
              <a
                href={n.href}
                class="rounded px-3 py-2 text-sm text-slate-700 hover:bg-slate-100"
                role="menuitem"
              >
                {n.label}
              </a>
            ))}
            <a
              href="tel:+4917629633132"
              class="mt-1 rounded px-3 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700"
              role="menuitem"
            >
              Anrufen
            </a>
          </nav>
        </div>
      </details>
    </div>
  </div>
</header>

<!-- Close-Logic: Outside-Click, Escape, Link-Klick; aria-expanded aktuell halten -->
<script is:inline>
  (function () {
    var d = document.querySelector('header details[data-burger]');
    if (!d) return;

    // aria-expanded aktualisieren
    d.addEventListener('toggle', function () {
      var s = d.querySelector('summary');
      if (s) s.setAttribute('aria-expanded', String(d.open));
    });

    // Outside click -> schließen
    document.addEventListener('click', function (e) {
      if (!d.open) return;
      if (!d.contains(e.target)) d.open = false;
    });

    // ESC -> schließen
    document.addEventListener('keydown', function (e) {
      if (e.key === 'Escape' && d.open) d.open = false;
    });

    // Link-Klick im Menü -> schließen
    d.addEventListener('click', function (e) {
      var a = e.target && e.target.closest ? e.target.closest('a') : null;
      if (a) d.open = false;
    });
  })();
</script>
